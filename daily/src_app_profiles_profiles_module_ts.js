"use strict";(self.webpackChunkDaily=self.webpackChunkDaily||[]).push([["src_app_profiles_profiles_module_ts"],{3760:(J,m,n)=>{n.r(m),n.d(m,{ProfilesModule:()=>w});var p=n(6362),a=n(2263),d=n(9423),c=n(9597),r=n(1915),g=n(4953),e=n(3184),u=n(9291),I=n(6458),C=n(5583),b=n(4633),A=n(266),P=n(1122);function y(i,s){if(1&i&&e._UZ(0,"button",13),2&i){const t=e.oxw();e.Q6J("disabled",!t.profileForm.valid)}}function F(i,s){1&i&&e._UZ(0,"button",14)}function M(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Oqu(t.name)}}let f=(()=>{class i{constructor(t,o,l,h){this.profilesService=t,this.route=o,this.router=l,this.footprintService=h,this.sourceList=[],this.targetList=[],this.pageMode="Add",this.urlRoute=g.X.ROUTES.DAILY+"/"+g.X.ROUTES.PROIFLES+"/"+g.X.ROUTES.LIST,this.isActive=1}ngOnInit(){this.route.snapshot.params.id&&(this.profileId=this.route.snapshot.params.id,this.viewMode="view"===this.route.snapshot.url[0].path,this.pageMode=this.viewMode?"View ":"edit"),this.initForm(),"edit"==this.pageMode?this.getProfileByID():this.getPrivilieges()}unassignedPrivileges(t){return this.targetList.forEach(o=>{t=t.filter(l=>l.id!==o.id)}),t}getPrivilieges(){this.profilesService.getPrivilegesList().subscribe(t=>{this.sourceList=this.unassignedPrivileges(t.payload.privileges)})}getProfileByID(){this.getSubscription=this.profilesService.getProfileById(this.profileId).subscribe(t=>{let o=t.payload.profile;this.footprintService.objectIdentifier=o.id;let l={name:o.name,isActive:o.isActive,privileges:o.privileges};l=JSON.parse(JSON.stringify(l)),console.log("profileClone",l),this.footprintService.handleOldValue(l),this.targetList=o.privileges,this.isActive=o.isActive,this.getPrivilieges(),this.profileForm.patchValue({name:o.name}),this.viewMode&&this.profileForm.disable()})}initForm(){this.profileForm=new r.cw({name:new r.NI(null,r.kI.required)})}onSubmit(){let t={name:this.profileForm.value.name,isActive:this.isActive,privileges:this.targetList};"edit"==this.pageMode?(this.footprintService.handleNewValue(t),t.id=this.profileId,this.profilesService.manageProfile(t,this.pageMode).subscribe(o=>{console.log("add profile response",o),0==o.statusCode&&this.router.navigateByUrl(this.urlRoute)})):(this.footprintService.handleNewValue(t),this.profilesService.manageProfile(t).subscribe(o=>{console.log("add profile response",o),0==o.statusCode&&this.router.navigateByUrl(this.urlRoute)})),console.log("Profile",t),console.log("Source list",this.sourceList),console.log("Target list",this.targetList)}ngOnDestroy(){var t;null===(t=this.getSubscription)||void 0===t||t.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.L),e.Y36(a.gz),e.Y36(a.F0),e.Y36(I.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-profile"]],decls:18,vars:11,consts:[[1,"add-container"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"profile-form"],[1,"p-float-label"],["id","float-input","type","text","pInputText","","formControlName","name","maxlength","50"],["for","float-input"],[1,"required"],["pButton","","class","btn btn-basic","type","submit","label","submit",3,"disabled",4,"ngIf"],["pButton","","pRipple","","type","Cancel","label","Cancel","class","p-button-danger p-button-text white-button","routerLink","/daily/profiles/list",4,"ngIf"],[1,"picklist-content"],[1,"pickList-title"],["sourceHeader","Unassigned","targetHeader","Assigned","filterBy","name","sourceFilterPlaceholder","Search by name","targetFilterPlaceholder","Search by name",3,"source","target","responsive","dragdrop","showSourceControls","showTargetControls","disabled"],["pTemplate","item"],["pButton","","type","submit","label","submit",1,"btn","btn-basic",3,"disabled"],["pButton","","pRipple","","type","Cancel","label","Cancel","routerLink","/daily/profiles/list",1,"p-button-danger","p-button-text","white-button"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(4,"div",2)(5,"span",3),e._UZ(6,"input",4),e.TgZ(7,"label",5),e._uU(8,"Profile Name "),e.TgZ(9,"span",6),e._uU(10,"*"),e.qZA()()(),e.YNc(11,y,1,1,"button",7),e.YNc(12,F,1,0,"button",8),e.qZA(),e.TgZ(13,"div",9)(14,"span",10),e._uU(15," Assign Privileges:"),e.qZA(),e.TgZ(16,"p-pickList",11),e.YNc(17,M,2,1,"ng-template",12),e.qZA()()()()),2&t&&(e.xp6(2),e.hij("",o.pageMode,"Profile"),e.xp6(1),e.Q6J("formGroup",o.profileForm),e.xp6(8),e.Q6J("ngIf",!o.viewMode),e.xp6(1),e.Q6J("ngIf",!o.viewMode),e.xp6(4),e.Q6J("source",o.sourceList)("target",o.targetList)("responsive",!0)("dragdrop",!0)("showSourceControls",!1)("showTargetControls",!1)("disabled",o.viewMode))},directives:[r._Y,r.JL,r.sg,r.Fj,C.o,r.JJ,r.u,r.nD,p.O5,b.Hq,a.rH,A.G,P.jx],styles:[".add-container[_ngcontent-%COMP%] {\n  padding: 0px 40px 40px 40px;\n}\n.add-container[_ngcontent-%COMP%]   .profile-form[_ngcontent-%COMP%] {\n  display: inline-flex;\n}\n.add-container[_ngcontent-%COMP%]   .profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  margin-left: 40px;\n}\n.add-container[_ngcontent-%COMP%]   .picklist-content[_ngcontent-%COMP%] {\n  margin-top: 15px;\n}\n.add-container[_ngcontent-%COMP%]   .picklist-content[_ngcontent-%COMP%]   .pickList-title[_ngcontent-%COMP%] {\n  font-weight: 600;\n  color: var(--primaryColor);\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZC1wcm9maWxlLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsMkJBQUE7QUFDRjtBQUFFO0VBQ0Usb0JBQUE7QUFFSjtBQURJO0VBQ0UsaUJBQUE7QUFHTjtBQUFFO0VBQ0UsZ0JBQUE7QUFFSjtBQURJO0VBQ0UsZ0JBQUE7RUFDQSwwQkFBQTtBQUdOIiwiZmlsZSI6ImFkZC1wcm9maWxlLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmFkZC1jb250YWluZXIge1xyXG4gIHBhZGRpbmc6IDBweCA0MHB4IDQwcHggNDBweDtcclxuICAucHJvZmlsZS1mb3JtIHtcclxuICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xyXG4gICAgYnV0dG9uIHtcclxuICAgICAgbWFyZ2luLWxlZnQ6IDQwcHg7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC5waWNrbGlzdC1jb250ZW50IHtcclxuICAgIG1hcmdpbi10b3A6IDE1cHg7XHJcbiAgICAucGlja0xpc3QtdGl0bGUge1xyXG4gICAgICBmb250LXdlaWdodDogNjAwO1xyXG4gICAgICBjb2xvcjogdmFyKC0tcHJpbWFyeUNvbG9yKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19 */"]}),i})();var Z=n(267),v=n(111),B=n(6709);let S=(()=>{class i{constructor(t,o,l){this.profilesService=t,this.router=o,this.privilegesService=l,this.profilesTable=new Z.G,this.profilesList=[],this.headers=[{fieldId:"name",title:"Profile"}],this.extraCols=[{fieldId:"lockFlag",title:"Actions",show:!0},{fieldId:"search",title:"search",show:!0}]}ngOnInit(){this.enableUpdate=this.privilegesService.checkPrivileges(c.$.PROFILES_MANAGMENT.UPDATE),this.enableDelete=this.privilegesService.checkPrivileges(c.$.PROFILES_MANAGMENT.DELETE),this.viewDetails=this.privilegesService.checkPrivileges(c.$.PROFILES_MANAGMENT.GET_BY_ID),this.profilesService.showSubject.next(this.router.url.includes("list")),this.listSubscription=this.profilesService.getProfilesList().subscribe(t=>{console.log("ProfilesList",t.payload.profilesList),this.profilesList=t.payload.profilesList,this.fillTable()})}fillTable(){this.profilesTable.cols=this.headers,this.profilesTable.extracols=this.extraCols,this.profilesTable.pagination=!0,this.profilesTable.lockFlag=!0,this.profilesTable.editFlag=!0,this.profilesTable.deleteFlag=!0,this.profilesTable.name="profiles",this.profilesTable.globalFilterFields=["name"],this.profilesTable.data=this.profilesList}ngOnDestroy(){var t;null===(t=this.listSubscription)||void 0===t||t.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.L),e.Y36(a.F0),e.Y36(v.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-profiles-list"]],decls:2,vars:4,consts:[[1,"mt-3"],[3,"table","enableDelete","enableUpdate","viewDetails"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-table",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("table",o.profilesTable)("enableDelete",o.enableDelete)("enableUpdate",o.enableUpdate)("viewDetails",o.viewDetails))},directives:[B.a],styles:["\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcm9maWxlcy1saXN0LmNvbXBvbmVudC5zY3NzIn0= */"]}),i})();function L(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addProfile()}),e.qZA()}}function T(i,s){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,L,1,0,"button",8),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.enableAdd)}}const U=[{path:"",component:(()=>{class i{constructor(t,o,l,h){this.router=t,this.profilesService=o,this.cdr=l,this.privilegesService=h}ngOnInit(){this.enableAdd=this.privilegesService.checkPrivileges(c.$.PROFILES_MANAGMENT.ADD),this.showSubscription=this.profilesService.showSubject.subscribe(t=>{this.showBtn=t,this.cdr.detectChanges()})}addProfile(){this.router.navigateByUrl("daily/profiles/add"),this.showBtn=!1}ngOnDestroy(){var t;null===(t=this.showSubscription)||void 0===t||t.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.F0),e.Y36(u.L),e.Y36(e.sBO),e.Y36(v.y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-profiles-management"]],decls:9,vars:1,consts:[[1,"layout-margin"],[1,"page-header"],[1,"page-title"],[1,"icon-profiles","head-icon"],[1,"head-font"],["class","page-action",4,"ngIf"],[1,"router-content"],[1,"page-action"],["pButton","","pRipple","","type","button","label","+ Add New Profile","class","p-button-danger p-button-text white-button",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","label","+ Add New Profile",1,"p-button-danger","p-button-text","white-button",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"span",3),e.TgZ(4,"span",4),e._uU(5," Profiles Management"),e.qZA()(),e.YNc(6,T,2,1,"div",5),e.qZA(),e.TgZ(7,"div",6),e._UZ(8,"router-outlet"),e.qZA()()),2&t&&(e.xp6(6),e.Q6J("ngIf",o.showBtn))},directives:[p.O5,b.Hq,a.lC],styles:[".layout-margin[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%] {\n  padding: 0 9px;\n  display: flex;\n  justify-content: space-between;\n}\n.layout-margin[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .page-action[_ngcontent-%COMP%] {\n  padding-right: 89px;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2ZpbGVzLW1hbmFnZW1lbnQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0k7RUFDSSxjQUFBO0VBQ0EsYUFBQTtFQUNBLDhCQUFBO0FBQVI7QUFDUTtFQUNJLG1CQUFBO0FBQ1oiLCJmaWxlIjoicHJvZmlsZXMtbWFuYWdlbWVudC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5sYXlvdXQtbWFyZ2luIHtcclxuICAgIC5wYWdlLWhlYWRlciB7XHJcbiAgICAgICAgcGFkZGluZzogMCA5cHg7XHJcbiAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICAgICAgLnBhZ2UtYWN0aW9uIHtcclxuICAgICAgICAgICAgcGFkZGluZy1yaWdodDogODlweDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl19 */"]}),i})(),children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:S},{path:"add",component:f,canActivate:[d.C],data:{privilege:c.$.PROFILES_MANAGMENT.ADD}},{path:"edit/:id",component:f,canActivate:[d.C],data:{privilege:c.$.PROFILES_MANAGMENT.UPDATE}},{path:"view/:id",component:f,canActivate:[d.C],data:{privilege:c.$.PROFILES_MANAGMENT.GET_BY_ID}}]}];let x=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[a.Bz.forChild(U)],a.Bz]}),i})();var O=n(4466);let w=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,x,O.m]]}),i})()}}]);
//# sourceMappingURL=src_app_profiles_profiles_module_ts.js.map